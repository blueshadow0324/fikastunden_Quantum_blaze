<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fikastunden - Hem</title>
  <link rel="icon" type="image/x-icon" href="fikastunden.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="top-bar">
      <h1>Fikastunden</h1>
      <div class="search-login">
        <a href="#" id="cart-toggle">
          <img src="shopping.png" alt="Shopping Cart" class="cart-icon">
        </a>
      </div>
    </div>
    <nav>
      <a href="index.html">Hem</a>
      <a href="produkter.html">Produkter</a>
      <a href="omoss.html">Om oss</a>
      <a href="kontakt.html">Kontakt</a>
    </nav>
  </header>

  <main>
    <section class="bestsellers">
      <h2>Våra bästsäljare</h2>
      <div class="products" id="products"></div>
    </section>
  </main>

  <!-- Cart Menu -->
  <div class="cart-menu" id="cart-menu">
    <div class="cart-header">
      <span>Din kundvagn</span>
      <button id="close-cart">✖</button>
    </div>
    <div class="cart-items" id="cart-items"></div>
    <div class="cart-total">
      Totalt: <span id="cart-total">0</span> kr
    </div>
    <div class="cart-buttons">
      <button id="checkout-button">Kassa</button>
      <button id="clear-cart">Rensa</button>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div class="checkout-modal" id="checkout-modal">
    <div class="checkout-form">
      <h2>Leveransinformation</h2>
      <form id="delivery-form">
        <label for="name">Namn:</label>
        <input type="text" id="name" name="name" placeholder="Ditt namn" required>

        <label for="address">Adress:</label>
        <input type="text" id="address" name="address" placeholder="Din adress" required>

        <label for="postcode">Postnummer:</label>
        <input type="text" id="postcode" name="postcode" placeholder="Postnummer" required>

        <label for="city">Ort:</label>
        <input type="text" id="city" name="city" placeholder="Ort" required>

        <label for="email">E-Mail:</label>
        <input type="email" id="email" name="email" placeholder="example@example.com" required>

        <label for="tel">Telefon:</label>
        <input type="tel" id="tel" name="tel" placeholder="Din telefon" required>

        <button type="submit">Slutför köp</button>
        <button type="button" id="cancel-checkout">Avbryt</button>
      </form>
    </div>
  </div>

  <script src="index.js"></script>
  <script>
  const cartMenu = document.getElementById("cart-menu");
const cartItemsElement = document.getElementById("cart-items");
const cartTotalElement = document.getElementById("cart-total");
const productsElement = document.getElementById("products");
const checkoutModal = document.getElementById("checkout-modal");

const products = [
  { name: "Kolakakor", price: 29, image: "kolakakor.jpeg" },
  { name: "Chokladbollar", price: 29, image: "chokladbollar.jpeg" },
  { name: "Pepparkakor", price: 19, image: "pepparkakor.jpeg" },
];

let cart = JSON.parse(localStorage.getItem("cart")) || [];

// Event Listeners
document.getElementById("cart-toggle").addEventListener("click", (event) => {
  event.preventDefault(); // Prevent default <a> behavior
  toggleCart();
});
document.getElementById("close-cart").addEventListener("click", toggleCart);
document.getElementById("checkout-button").addEventListener("click", openCheckout);
document.getElementById("clear-cart").addEventListener("click", clearCart);
document.getElementById("cancel-checkout").addEventListener("click", closeCheckout);
document.getElementById("delivery-form").addEventListener("submit", submitCheckout);

// Load initial state
window.addEventListener("load", () => {
  renderProducts();
  updateCart();
});

// Cart Functions
function toggleCart() {
  cartMenu.classList.toggle("open");
}

function addToCart(productName, productPrice) {
  const existingItem = cart.find(item => item.name === productName);
  if (existingItem) {
    existingItem.quantity++;
  } else {
    cart.push({ name: productName, price: productPrice, quantity: 1 });
  }
  updateCart();
  alert(`${productName} har lagts till i kundvagnen!`);
}

function updateCart() {
  cartItemsElement.innerHTML = "";
  let total = 0;

  cart.forEach(item => {
    total += item.price * item.quantity;
    const cartItem = document.createElement("div");
    cartItem.className = "cart-item";
    cartItem.innerHTML = `
      <span>${item.name} (x${item.quantity})</span>
      <span>${item.price * item.quantity} kr</span>
    `;
    cartItemsElement.appendChild(cartItem);
  });

  cartTotalElement.innerText = `Totalt: ${total} kr`;
  localStorage.setItem("cart", JSON.stringify(cart));
}

function openCheckout() {
  checkoutModal.classList.add("open");
}

function closeCheckout() {
  checkoutModal.classList.remove("open");
}

function clearCart() {
  cart = [];
  updateCart();
}

function submitCheckout(event) {
  event.preventDefault();
  // Add checkout form submission logic here
  alert("Tack för din beställning!");
  clearCart();
}

// Render products on the page
function renderProducts() {
  productsElement.innerHTML = "";
  products.forEach(product => {
    const productElement = document.createElement("div");
    productElement.className = "product";
    productElement.innerHTML = `
      <img src="${product.image}" alt="${product.name}">
      <div>
        <h3>${product.name}</h3>
        <p>${product.price} kr</p>
        <button onclick="addToCart('${product.name}', ${product.price})">Lägg till i kundvagnen</button>
      </div>
    `;
    productsElement.appendChild(productElement);
  });
}
</script>
</body>
</html>